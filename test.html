<!DOCTYPE html>
<html lang="en">

    <head>
        <title>Chart.js demo</title>
        <script type='text/javascript' src='https://public.tableau.com/javascripts/api/viz_v1.js'></script>

    
<!--
    <div class='tableauPlaceholder' style='width: 982px; height: 742px;'><noscript><a href=''><img alt='Sheet 1 ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;te&#47;test_1124&#47;Sheet1&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz' width='982' height='742' style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='site_root' value='' /><param name='name' value='test_1124&#47;Sheet1' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;te&#47;test_1124&#47;Sheet1&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /><param name='showVizHome' value='no' /><param name='showTabs' value='y' /><param name='bootstrapWhenNotified' value='true' /></object>
        </div>
-->
    
    <style type="text/css">
/*-----------------------------------------------------------PDF-------------------------------------------------------------------*/
    #pdf {
        width: 50%;
        height: 50em;
        margin-right: auto;
        margin-left: auto;
        margin-top: 188px;
        border: 10px solid #6699FF;
    }

    #pdf object {
       display: block;
       border: solid 1px #666;
    }

/*---------------------------------------------------------DROPDOWN----------------------------------------------------------------*/
        
    .dropbtn {
        background-color: rgba(151,187,205,0.75);
        color: white;
        padding: 12px;
        font-size: 12px;
        border: none;
        cursor: pointer;
    }

    .dropbtn:hover, .dropbtn:focus {
        rgba(151,187,205,1);
    }

    .dropdown {
        display: inline-block;
    }

    .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f9f9f9;
        min-width: 160px;
        overflow: auto;
        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    }

    .dropdown-content a {
        color: black;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
    }

    .dropdown a:hover {background-color: #f1f1f1}

    .show {display:block;}
    
 

/*---------------------------------------------------------LEGEND------------------------------------------------------------------*/
        
    /* basic positioning */
    #legend-container {display: inline;}
    .legend { list-style: none; }
    .legend li { float: left; margin-right: 10px; }
    .legend span { border: 1px solid #ccc; float: left; width: 12px; height: 12px; margin: 2px; }
        
    /* my colours */
    .legend .undergrad { background-color: rgba(220,220,220,0.5); }
    .legend .grad { background-color: rgba(151,187,205,0.5); }

    </style>
        
    
    <script src="js/papaparse.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://www.chartjs.org/assets/Chart.min.js"></script>
    <script src="js/Chart.StackedBar.js"></script> 
    
    </head>
    <body>

        
        <div>
            <canvas id="stackedBar" width="600" height="400"></canvas>
        </div>
<!--
        <div id="legend">
        </div>
-->
        <div id="legend-container">
            <ul class="legend">
                <li><span class="undergrad"></span>Undergraduate</li>
                <li><span class="grad"></span>Graduate</li>
            </ul>
        </div>
        <div class="dropdown">
          <button onclick="myFunction()" class="dropbtn">Select a Faculty</button>
          <div id="myDropdown" class="dropdown-content">
            <a onclick= "changeGraph(this)">AHS</a>
            <a onclick= "changeGraph(this)">ARTS</a>
            <a onclick= "changeGraph(this)">ENG</a>
            <a onclick= "changeGraph(this)">TOTAL</a>
          </div>
        </div>                      
        
        <div style="width:600px;height:400px">
        <canvas id="myChart"></canvas>
        </div>
        <input type="file" id="csv-file" name="files"/>
 
        <div>
        <canvas id="countries" width="600" height="400"></canvas>
        </div>
    
        <script>
            //DROPDOWN MENU ---------------------------------------------------------------------------------------------------------
            
            /* When the user clicks on the button, 
            toggle between hiding and showing the dropdown content */
            function myFunction() {
                document.getElementById("myDropdown").classList.toggle("show");
            }
            
            
            
            //stackedBar ------------------------------------------------------------------------------------------------------------
            var stackedData = {
                labels: ["2010/11", "2011/12", "2012/13", "2013/14", "2014/15"],
                datasets: [
                    {
                        label: "Graduate",
                        fillColor: "rgba(151,187,205,0.5)",
                        strokeColor: "rgba(151,187,205,0.8)",
                        highlightFill: "rgba(151,187,205,0.75)",
                        highlightStroke: "rgba(151,187,205,1)",
                        data: [3651, 3834, 4037, 4207, 4181]
                    },
                    {
                        label: "Undergraduate",
                        fillColor: "rgba(220,220,220,0.5)",
                        strokeColor: "rgba(220,220,220,0.8)",
                        highlightFill: "rgba(220,220,220,0.75)",
                        highlightStroke: "rgba(220,220,220,1)",
                        data: [25889, 26963, 27529, 28423, 28717]
                    }                   
                ]
            };
                var myNewStackedChart;
                myStack = document.getElementById("stackedBar").getContext("2d");
                myNewStackedChart = new Chart(myStack).StackedBar(stackedData, {
                    responsive: false,
                    legendTemplate : "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\"background-color:<%=datasets[i].strokeColor%>\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>"
                });
                //document.getElementById("legend").innerHTML = myNewStackedChart.generateLegend();
                console.log(myNewStackedChart); //Total Graduate data
//                    myNewStackedChart.data.datasets[0].data = [281, 297, 321, 393, 407];
//                    myNewStackedChart.data.datasets[1].data = [1662, 1707, 1831, 1985, 2081];
                    




            //UPDATE GRAPH ----------------------------------------------------------------------------------------------------------
            
            function changeGraph(id){
                
                AHS = [[281, 297, 321, 393, 407], [1662, 1707, 1831, 1985, 2081]];
                ARTS = [[581, 615, 671, 712, 716], [6701, 6801, 6918, 7045, 6619]];
                ENG = [[1493, 1472, 1546, 1541, 1474], [5088, 5039, 5462, 5578, 5765]];
                TOTAL = [[3651, 3834, 4037, 4207, 4181],[25889, 26963, 27529, 28423, 28717]];
                
                if(id.innerHTML == 'AHS'){
                    myNewStackedChart.datasets[0].bars.forEach(function (arrayItem, arrayIndex){
                        arrayItem.value = AHS[0][arrayIndex];
                    })
                    myNewStackedChart.datasets[1].bars.forEach(function (arrayItem, arrayIndex){
                        arrayItem.value = AHS[1][arrayIndex];
                    })
                    myNewStackedChart.update();
                    
                }
                if(id.innerHTML == 'ARTS'){
                    myNewStackedChart.datasets[0].bars.forEach(function (arrayItem, arrayIndex){
                        arrayItem.value = ARTS[0][arrayIndex];
                    })
                    myNewStackedChart.datasets[1].bars.forEach(function (arrayItem, arrayIndex){
                        arrayItem.value = ARTS[1][arrayIndex];
                    })
                    myNewStackedChart.update();
                }
                if(id.innerHTML == 'ENG'){
                    myNewStackedChart.datasets[0].bars.forEach(function (arrayItem, arrayIndex){
                        arrayItem.value = ENG[0][arrayIndex];
                    })
                    myNewStackedChart.datasets[1].bars.forEach(function (arrayItem, arrayIndex){
                        arrayItem.value = ENG[1][arrayIndex];
                    })
                    myNewStackedChart.update();
                }
                if(id.innerHTML == 'TOTAL'){
                    myNewStackedChart.datasets[0].bars.forEach(function (arrayItem, arrayIndex){
                        arrayItem.value = TOTAL[0][arrayIndex];
                    })
                    myNewStackedChart.datasets[1].bars.forEach(function (arrayItem, arrayIndex){
                        arrayItem.value = TOTAL[1][arrayIndex];
                    })
                    myNewStackedChart.update();
                }
            }
            
            // myChart --------------------------------------------------------------------------------------------------------------
            var data;

            function handleFileSelect(evt) {
                var file = evt.target.files[0];

                Papa.parse(file, {
                  header: true,
                  dynamicTyping: true,
                  complete: function(results) {
                    data = results;
                    console.log(data);
                    data = data["data"].splice(0,15);
                    console.log(data);
                    var newData = [];
                    data.forEach(function (arrayItem)
                    {                           
                        for (var property in arrayItem){
                            if (arrayItem.hasOwnProperty(property)){
                            } 
                        }
                    })
                    console.log(newData);



                  }
                });
              }

              $(document).ready(function(){
                $("#csv-file").change(handleFileSelect);

              });
            
            var barData = {
                labels: ["January", "February", "March", "April", "May", "June", "July"],
                datasets: [
                    {
                        label: "My First dataset",
                        fillColor: "rgba(220,220,220,0.5)",
                        strokeColor: "rgba(220,220,220,0.8)",
                        highlightFill: "rgba(220,220,220,0.75)",
                        highlightStroke: "rgba(220,220,220,1)",
                        data: [65, 59, 80, 81, 56, 55, 40]
                    },
                    {
                        label: "My Second dataset",
                        fillColor: "rgba(151,187,205,0.5)",
                        strokeColor: "rgba(151,187,205,0.8)",
                        highlightFill: "rgba(151,187,205,0.75)",
                        highlightStroke: "rgba(151,187,205,1)",
                        data: [28, 48, 40, 19, 86, 27, 90]
                    }
                ]
            };

            myBar = document.getElementById("myChart").getContext("2d");
            var myNewChart = new Chart(myBar).Bar(barData, {responsive: true});

            
                
                        
            // COUNTRIES ------------------------------------------------------------------------------------------------------------
            var pieData = [
                {
                    value: 20,
                    color:"#878BB6"
                },
                {
                    value : 40,
                    color : "#4ACAB4"
                },
                {
                    value : 10,
                    color : "#FF8153"
                },
                {
                    value : 30,
                    color : "#FFEA88"
                }
            ];
            // Get the context of the canvas element we want to select
            var countries= document.getElementById("countries").getContext("2d");
            new Chart(countries).Pie(pieData, {responsive: true});
            
                
            
        </script>

<!------------------------------------------------------------- PDF ---------------------------------------------------------------->
        
<!--
        <div id="pdf" align="right">
        <object data="Units Taught Y14.15.pdf" type="application/pdf" width="100%" height="100%">
             <p>It appears you don't have a PDF plugin for this browser.
              No biggie... you can <a href="Units Taught Y14.15.pdf">click here to
              download the PDF file.</a>
            </p>
            </object>
        </div>
-->

    </body>
    
</html>